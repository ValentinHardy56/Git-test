<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Trololo</title>
<style>
  /* Reset minimal */
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%}
  body{
    font-family: "Segoe UI", Roboto, system-ui, -apple-system, "Helvetica Neue", Arial;
    background: linear-gradient(120deg,#0f172a,#0b1220 40%, #081226);
    color:#e6eef8;
    overflow:hidden;
  }

  /* Big neon headline */
  header{
    position:relative;
    z-index:10;
    padding:32px;
    text-align:center;
    text-shadow:0 2px 20px rgba(0,0,0,0.6);
  }
  h1{
    font-size:clamp(28px,6vw,64px);
    letter-spacing:2px;
    margin-bottom:6px;
    transform:rotate(-1deg);
  }
  p.lead{opacity:.85;margin-bottom:16px}

  /* Center stage */
  .stage{
    position:absolute;
    inset:0;
    display:grid;
    place-items:center;
    pointer-events:none;
  }
  .card{
    pointer-events:auto;
    width:min(920px,95%);
    background:rgba(255,255,255,0.03);
    border:1px solid rgba(255,255,255,0.06);
    padding:18px;
    border-radius:14px;
    backdrop-filter:blur(4px);
    box-shadow:0 10px 40px rgba(0,0,0,0.6);
    display:grid;
    grid-template-columns: 1fr 320px;
    gap:14px;
    align-items:start;
  }
  .left{
    min-height:300px;
  }
  .right{
    min-height:300px;
    text-align:center;
  }

  /* Trolly buttons */
  .btn{
    display:inline-block;
    padding:10px 14px;
    border-radius:10px;
    cursor:pointer;
    background:linear-gradient(180deg,#ff6b6b,#ff3b3b);
    color:white;
    border:none;
    font-weight:700;
    box-shadow:0 6px 20px rgba(255,59,59,0.18);
    margin:6px 6px 6px 0;
  }
  .btn.alt{
    background:linear-gradient(180deg,#3b82f6,#1e40af);
    box-shadow:0 6px 20px rgba(30,64,175,0.18);
  }

  /* Typing area */
  .typebox{
    background:rgba(0,0,0,0.35);
    padding:14px;
    border-radius:10px;
    min-height:120px;
    color:#dff;
    font-family:monospace;
    font-size:16px;
    overflow:auto;
  }

  /* Dancing GIF area (we'll use emoji + CSS) */
  .dancefloor{
    display:flex;
    gap:8px;
    justify-content:center;
    align-items:center;
    margin-top:10px;
  }
  .dancer{
    font-size:52px;
    transform-origin:center bottom;
    animation:shake 800ms infinite alternate;
  }
  .dancer:nth-child(2){animation-duration:700ms}
  .dancer:nth-child(3){animation-duration:900ms}
  @keyframes shake{
    from{transform:translateY(0) rotate(-6deg)}
    to{transform:translateY(-18px) rotate(8deg)}
  }

  /* Floating annoyances */
  .eye{
    position:fixed;
    width:80px;height:80px;
    border-radius:50%;
    background:radial-gradient(circle at 35% 30%, #fff 0 35%, #a8d0ff 36%);
    border:4px solid rgba(255,255,255,0.2);
    z-index:9;
    display:flex;align-items:center;justify-content:center;
    box-shadow:0 6px 30px rgba(0,0,0,0.6);
    pointer-events:none;
  }
  .pupil{
    width:28px;height:28px;background:#111;border-radius:50%;
  }

  /* Fake notification */
  .notify{
    position:fixed;
    left:20px;bottom:20px;
    background:#0f172a;border:1px solid rgba(255,255,255,.06);
    padding:12px 14px;border-radius:10px;z-index:30;
    box-shadow:0 10px 40px rgba(0,0,0,0.6);
  }

  /* Footer small */
  footer{position:fixed;right:10px;bottom:6px;opacity:.6;font-size:12px}
  /* Confetti canvas */
  canvas.confetti{position:fixed;inset:0;z-index:50;pointer-events:none}

  /* Glitch header effect */
  .glitch{
    position:relative;display:inline-block;
  }
  .glitch::before, .glitch::after{
    content:attr(data-text);
    position:absolute;left:0;top:0;
    clip-path:polygon(0 0,100% 0,100% 40%,0 40%);
    opacity:.8;
    transform:translate(2px,-2px);
  }
  .glitch::after{
    clip-path:polygon(0 60%,100% 60%,100% 100%,0 100%);
    transform:translate(-2px,2px);
  }

  /* Overlay fake modal */
  .modal{
    position:fixed;inset:0;display:grid;place-items:center;
    background:rgba(0,0,0,0.6);z-index:60;
  }
  .modal .box{background:#fff;color:#111;padding:20px;border-radius:12px;min-width:320px}
  .hidden{display:none !important}
</style>
</head>
<body>

<header>
  <h1 class="glitch" data-text="‚ö†Ô∏è TROLL MODE ACTIV√â ‚ö†Ô∏è">‚ö†Ô∏è TROLL MODE ACTIV√â ‚ö†Ô∏è</h1>
  <p class="lead">Une seule page HTML. Avertissement : tu as demand√© "full troll". Tu es pr√©venu ü´°</p>
  <div>
    <button class="btn" id="btnRick">‚ñ∂Ô∏è PLAY (Rickroll)</button>
    <button class="btn alt" id="btnChaos">üî• Lancer le chaos</button>
    <button class="btn" id="btnDisable">üõë D√âSACTIVER LE TROLL</button>
  </div>
</header>

<div class="stage" aria-hidden="false">
  <div class="card" role="main">
    <div class="left">
      <div class="typebox" id="typebox">
        <span id="typed">Bienvenue... ou pas. Pr√©pare-toi. Le troll est un art de vivre.</span>
      </div>

      <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
        <button class="btn" id="btnSpam">üîî Spam notification</button>
        <button class="btn alt" id="btnInvert">üé≠ Inverser couleurs</button>
        <button class="btn" id="btnFakeError">üí• Faux crash</button>
        <button class="btn alt" id="btnFollow">üëÅÔ∏è Faire te suivre</button>
      </div>

      <div style="margin-top:12px;font-size:13px;opacity:.9">
        <strong>Conseil troll :</strong> clique sur tout, regarde ce qui se passe, ou ferme l'onglet si tu en as marre.
      </div>
    </div>

    <aside class="right">
      <div style="font-size:12px;opacity:.9">Panel de distractions</div>

      <div class="dancefloor" aria-hidden="true">
        <div class="dancer">üï∫</div>
        <div class="dancer">üíÉ</div>
        <div class="dancer">üê±‚Äçüë§</div>
      </div>

      <div style="margin-top:14px">
        <img id="rickThumb" src="https://img.youtube.com/vi/dQw4w9WgXcQ/hqdefault.jpg" alt="rickroll" style="width:100%;border-radius:8px;box-shadow:0 8px 30px rgba(0,0,0,0.6);cursor:pointer">
        <div style="margin-top:8px">
          <small>Cliquer sur la miniature pour RickRoll instantan√©.</small>
        </div>
      </div>
    </aside>
  </div>
</div>

<!-- floating eyes -->
<div class="eye" id="eye1" style="left:16px;top:60px"><div class="pupil" id="p1"></div></div>
<div class="eye" id="eye2" style="right:22px;top:120px"><div class="pupil" id="p2"></div></div>

<!-- fake notification -->
<div class="notify" id="notify" style="display:none">
  <strong>Notification</strong><div id="notifyText">Quelque chose est arriv√©.</div>
</div>

<!-- confetti canvas -->
<canvas class="confetti" id="conf"></canvas>

<footer>Made with mischief ‚Ä¢ Single HTML</footer>

<!-- modal for faux crash -->
<div class="modal hidden" id="modal">
  <div class="box">
    <h3>System Error</h3>
    <p>Erreur fatale : process troll.exe a plant√©. Voulez-vous red√©marrer ?</p>
    <div style="text-align:right;margin-top:12px">
      <button class="btn" id="modalOk">Red√©marrer</button>
      <button class="btn alt" id="modalCancel">Annuler</button>
    </div>
  </div>
</div>

<!-- audio element for Rickroll (do not autoplay to respect some browsers) -->
<audio id="rickAudio" preload="auto" src="https://r.jina.ai/http://ricksnippet.net/rickroll.mp3"></audio>

<script>
/* ---------------------------
   Petit troll JS ‚Äî tout en un
   --------------------------- */

const typebox = document.getElementById('typebox');
const typed = document.getElementById('typed');
const btnRick = document.getElementById('btnRick');
const btnChaos = document.getElementById('btnChaos');
const btnDisable = document.getElementById('btnDisable');
const btnSpam = document.getElementById('btnSpam');
const btnInvert = document.getElementById('btnInvert');
const btnFakeError = document.getElementById('btnFakeError');
const btnFollow = document.getElementById('btnFollow');
const notify = document.getElementById('notify');
const notifyText = document.getElementById('notifyText');
const modal = document.getElementById('modal');
const modalOk = document.getElementById('modalOk');
const modalCancel = document.getElementById('modalCancel');
const confCanvas = document.getElementById('conf');
const rickAudio = document.getElementById('rickAudio');
const rickThumb = document.getElementById('rickThumb');

let trollEnabled = true;
let followEyes = false;
let inverted = false;
let chaosInterval = null;

/* Tiny typewriter effect (looping messages) */
const msgs = [
  "Pr√©pare-toi... üéØ",
  "Ce site n'a aucun but s√©rieux.",
  "Clique partout, ferme l'onglet si tu veux gagner.",
  "Tu as demand√© du troll, voici du troll.",
  "Bonne chance. üçÄ"
];
let mi = 0;
function startTyping(){
  let txt = msgs[mi];
  typed.textContent = "";
  let i=0;
  const t = setInterval(()=>{
    typed.textContent += txt.charAt(i++);
    typebox.scrollTop = typebox.scrollHeight;
    if(i>txt.length){
      clearInterval(t);
      setTimeout(()=>{ mi = (mi+1)%msgs.length; startTyping(); }, 1200);
    }
  }, 45 + Math.random()*50);
}
startTyping();

/* Rickroll button */
btnRick.addEventListener('click', ()=> {
  // try play audio, if blocked, open youtube in new tab
  rickAudio.play().catch(()=>{
    window.open('https://www.youtube.com/watch?v=dQw4w9WgXcQ','_blank');
  });
  // quick visual
  btnRick.textContent = "üé∂ Rickroll en cours...";
});

/* Clicking thumbnail opens youtube (classic) */
rickThumb.addEventListener('click', ()=> window.open('https://www.youtube.com/watch?v=dQw4w9WgXcQ','_blank'));

/* Spam notifications */
let spamCount = 0;
btnSpam.addEventListener('click', ()=>{
  spamCount=0;
  const s = setInterval(()=>{
    if(!trollEnabled) { clearInterval(s); return; }
    spamCount++;
    notifyText.textContent = `Spam #${spamCount} ‚Äî Tu as √©t√© troll√©!`;
    notify.style.display = 'block';
    setTimeout(()=> notify.style.display = 'none', 1400);
    if(spamCount>9) clearInterval(s);
  }, 700);
});

/* Invert colors */
btnInvert.addEventListener('click', ()=>{
  inverted = !inverted;
  document.documentElement.style.filter = inverted ? 'invert(1) hue-rotate(180deg)' : '';
});

/* Faux crash modal */
btnFakeError.addEventListener('click', ()=> modal.classList.remove('hidden'));
modalCancel.addEventListener('click', ()=> modal.classList.add('hidden'));
modalOk.addEventListener('click', ()=>{
  modal.querySelector('.box').innerHTML = '<h3>Red√©marrage...</h3><p>Veuillez patienter...</p>';
  setTimeout(()=> {
    // fake "restart" by reloading the page with a query param
    location.href = location.pathname + '?restarted=true';
  }, 1400);
});

/* Follow eyes toggle */
btnFollow.addEventListener('click', ()=>{
  followEyes = !followEyes;
  btnFollow.textContent = followEyes ? 'üëÅÔ∏è Te suivre : ON' : 'üëÅÔ∏è Faire te suivre';
});

/* Chaos button: confetti + random explosions of emojis + rapid color changes */
btnChaos.addEventListener('click', ()=>{
  // if already running, stop
  if(chaosInterval){
    clearInterval(chaosInterval); chaosInterval = null;
    btnChaos.textContent = 'üî• Lancer le chaos';
    return;
  }
  btnChaos.textContent = '‚õî Chaos activ√© (re-clique pour calmer)';
  startConfetti();
  chaosInterval = setInterval(()=>{
    if(!trollEnabled){ clearInterval(chaosInterval); chaosInterval = null; return;}
    // random emoji popup
    const e = document.createElement('div');
    e.style.position='fixed';
    e.style.left = (Math.random()*80+5) + 'vw';
    e.style.top = (Math.random()*70+10) + 'vh';
    e.style.fontSize = (20+Math.random()*80)+'px';
    e.style.zIndex = 80;
    e.textContent = ['üí•','‚ú®','üî•','üòà','üéâ','üçï','üëæ','üíÄ'][Math.floor(Math.random()*8)];
    document.body.appendChild(e);
    setTimeout(()=> e.remove(), 3000);
    // quick invert flash
    document.documentElement.style.filter = 'contrast(1.2) saturate(1.4) hue-rotate('+Math.random()*360+'deg)';
    setTimeout(()=> document.documentElement.style.filter = inverted ? 'invert(1) hue-rotate(180deg)' : '', 450);
  }, 700);
});

/* Disable whole troll (fake) */
btnDisable.addEventListener('click', ()=>{
  trollEnabled = false;
  // stop audio
  rickAudio.pause(); rickAudio.currentTime = 0;
  // stop confetti
  stopConfetti();
  // remove annoyances
  document.querySelectorAll('.dancer').forEach(d=> d.style.animation='none');
  notify.style.display='none';
  modal.classList.add('hidden');
  btnDisable.textContent = 'üõ°Ô∏è TROLL PAUS√â';
  // pretend to "unsubscribe" by showing a calm message
  typed.textContent = "Le troll est en pause. Respire. Tu peux fermer cette page si tu veux.";
});

/* Eyes follow the cursor */
const eye1 = document.getElementById('eye1');
const eye2 = document.getElementById('eye2');
const p1 = document.getElementById('p1');
const p2 = document.getElementById('p2');
document.addEventListener('mousemove', (ev)=>{
  if(!followEyes) return;
  movePupil(eye1, p1, ev.clientX, ev.clientY);
  movePupil(eye2, p2, ev.clientX, ev.clientY);
});
function movePupil(eye,pupil,x,y){
  const rect = eye.getBoundingClientRect();
  const cx = rect.left + rect.width/2;
  const cy = rect.top + rect.height/2;
  const dx = x-cx;
  const dy = y-cy;
  const ang = Math.atan2(dy,dx);
  const radius = Math.min(rect.width/6, Math.hypot(dx,dy)/6);
  pupil.style.transform = `translate(${Math.cos(ang)*radius}px, ${Math.sin(ang)*radius}px)`;
}

/* Confetti simple implementation */
const conf = confCanvas;
const ctx = conf.getContext('2d');
let confetti = [];
function resizeConf(){
  conf.width = innerWidth; conf.height = innerHeight;
}
window.addEventListener('resize', resizeConf);
resizeConf();
function startConfetti(){
  confetti = [];
  for(let i=0;i<120;i++){
    confetti.push({
      x: Math.random()*conf.width,
      y: Math.random()*conf.height - conf.height,
      r: 6+Math.random()*12,
      d: (Math.random()*2)+1,
      tilt: Math.random()*10-5,
      color: `hsl(${Math.floor(Math.random()*360)} 90% 60%)`,
      velY: 1+Math.random()*4,
      velX: -2+Math.random()*4
    });
  }
  requestAnimationFrame(drawConfetti);
}
let confAnim = true;
function drawConfetti(){
  if(!confetti.length){ ctx.clearRect(0,0,conf.width,conf.height); return; }
  ctx.clearRect(0,0,conf.width,conf.height);
  for(let p of confetti){
    ctx.fillStyle = p.color;
    ctx.beginPath();
    ctx.ellipse(p.x, p.y, p.r, p.r/2, p.tilt*Math.PI/180, 0, Math.PI*2);
    ctx.fill();
    p.x += p.velX;
    p.y += p.velY;
    p.tilt += 0.5;
    if(p.y > conf.height + 20) {
      p.y = -10;
      p.x = Math.random()*conf.width;
    }
  }
  if(confAnim) requestAnimationFrame(drawConfetti);
}
function stopConfetti(){
  confetti = [];
  confAnim = false;
  ctx.clearRect(0,0,conf.width,conf.height);
}

/* Sneaky cursor follower (tiny dot) */
const dot = document.createElement('div');
dot.style.position='fixed';
dot.style.width='14px';
dot.style.height='14px';
dot.style.borderRadius='50%';
dot.style.background='rgba(255,255,255,0.7)';
dot.style.pointerEvents='none';
dot.style.zIndex=95;
dot.style.transform='translate(-50%,-50%)';
document.body.appendChild(dot);
document.addEventListener('mousemove', e=>{
  dot.style.left = e.clientX + 'px';
  dot.style.top = e.clientY + 'px';
});

/* Tiny prank: change title periodically */
const originalTitle = document.title;
const titles = [
  "‚ö†Ô∏è TROLL MODE",
  "üëÄ On te regarde",
  "üòú Bye? Pas si vite",
  "üéâ Surprise!"
];
let ti=0;
setInterval(()=> {
  if(!trollEnabled) { document.title = originalTitle; return; }
  document.title = titles[ti++ % titles.length];
}, 1800);

/* Bonus: keyboard spam when pressing random keys */
let spamTyping = false;
document.addEventListener('keydown', (e)=>{
  if(!trollEnabled) return;
  if(Math.random() < 0.08 && !spamTyping){
    spamTyping = true;
    const s = ["NOPE","TROLL","LOL","TRY AGAIN","¬Ø\\_(„ÉÑ)_/¬Ø","404 FUN NOT FOUND"];
    let el = document.createElement('div');
    el.textContent = s[Math.floor(Math.random()*s.length)];
    el.style.position='fixed';
    el.style.left = (10 + Math.random()*80) + 'vw';
    el.style.top = (10 + Math.random()*75) + 'vh';
    el.style.zIndex=98;
    el.style.padding = '8px 12px';
    el.style.borderRadius='10px';
    el.style.background='rgba(0,0,0,0.6)';
    el.style.color='#fff';
    el.style.fontWeight=700;
    document.body.appendChild(el);
    setTimeout(()=>{ el.remove(); spamTyping=false; }, 1600);
  }
});

/* Small wobble effect on heading on click */
document.querySelector('h1').addEventListener('click', (e)=>{
  e.target.animate([
    { transform: 'rotate(-1deg) scale(1)' },
    { transform: 'rotate(6deg) scale(1.06)' },
    { transform: 'rotate(-4deg) scale(.98)' },
    { transform: 'rotate(0deg) scale(1)' }
  ], {duration:700, easing:'ease-out'});
});

/* If the page loaded with ?restarted=true show a toast */
if(location.search.includes('restarted=true')){
  setTimeout(()=> {
    notifyText.textContent = "Red√©marrage termin√©. Le troll est revenu plus fort üòà";
    notify.style.display = 'block';
    setTimeout(()=> notify.style.display='none', 2400);
    // re-enable some features
    trollEnabled = true;
  }, 800);
}

/* Small accessibility: keyboard button triggers */
[btnRick, btnChaos, btnDisable, btnSpam, btnInvert, btnFakeError, btnFollow].forEach(b=>{
  b.addEventListener('keyup', (ev)=>{ if(ev.key === 'Enter') b.click(); });
});

/* Extra: gentle console message for devs */
console.log("%cTu regardes la console ? Bienvenue, complice du troll.", "background:#111;color:#bada55;padding:8px;border-radius:6px");

/* End of script */
</script>
</body>
</html>
